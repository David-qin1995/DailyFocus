<view class="analysis-container">
  <!-- é¡¶éƒ¨ç”ŸæˆåŒºåŸŸ -->
  <view class="generate-section">
    <view class="section-title">ç”Ÿæˆæ–°çš„åˆ†ææŠ¥å‘Š</view>
    
    <!-- å‘¨æœŸé€‰æ‹© -->
    <view class="period-selector">
      <view 
        class="period-item {{periodType === item.value ? 'active' : ''}}"
        wx:for="{{periodOptions}}"
        wx:key="value"
        data-value="{{item.value}}"
        bindtap="selectPeriod"
      >
        {{item.label}}
      </view>
    </view>

    <button 
      class="generate-btn" 
      bindtap="generateReport"
      disabled="{{generating}}"
    >
      {{generating ? 'åˆ†æä¸­...' : 'å¼€å§‹åˆ†æ'}}
    </button>

    <view class="tip-text">
      AIå°†åˆ†ææ‚¨çš„èŠå¤©å†…å®¹,æ€»ç»“æ‚¨çš„é—®é¢˜ã€ä¼˜ç‚¹ã€æ”¹è¿›æ–¹å‘å’ŒåšæŒäº‹é¡¹
    </view>
  </view>

  <!-- å†å²æŠ¥å‘Šåˆ—è¡¨ -->
  <view class="reports-section">
    <view class="section-title">å†å²æŠ¥å‘Š</view>

    <view wx:if="{{loading}}" class="loading-container">
      <text>åŠ è½½ä¸­...</text>
    </view>

    <view wx:elif="{{reports.length === 0}}" class="empty-container">
      <text class="empty-icon">ğŸ“Š</text>
      <text class="empty-text">è¿˜æ²¡æœ‰åˆ†ææŠ¥å‘Š</text>
      <text class="empty-hint">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ç”Ÿæˆç¬¬ä¸€ä»½æŠ¥å‘Š</text>
    </view>

    <view wx:else class="reports-list">
      <view 
        class="report-card"
        wx:for="{{reports}}"
        wx:key="id"
        bindtap="viewReport"
        data-id="{{item.id}}"
      >
        <view class="report-header">
          <view class="report-type">{{getPeriodText(item.periodType)}}</view>
          <view class="report-date">{{formatDate(item.createdAt)}}</view>
        </view>
        
        <view class="report-title" wx:if="{{item.title}}">
          {{item.title}}
        </view>
        
        <view class="report-period">
          {{formatDate(item.startAt)}} ~ {{formatDate(item.endAt)}}
        </view>

        <view class="report-actions">
          <text class="view-btn">æŸ¥çœ‹è¯¦æƒ…</text>
          <text 
            class="delete-btn" 
            catchtap="deleteReport"
            data-id="{{item.id}}"
          >
            åˆ é™¤
          </text>
        </view>
      </view>
    </view>
  </view>
</view>

